"use strict";(self.webpackChunkShopping_go=self.webpackChunkShopping_go||[]).push([[727],{8964:(_,g,i)=>{i.d(g,{m:()=>r});var d=i(2598),m=i(1626);let r=(()=>{class t{constructor(c){this._HttpClient=c,this.cartCount=(0,d.vPA)(0),this.myHeaders={token:localStorage.getItem("_token")},this.baseUrl="https://ecommerce.routemisr.com/api/v1/cart",localStorage.getItem("_token")&&this.getCart().subscribe({next:s=>this.cartCount.set(s.numOfCartItems),error:s=>console.log(s)})}addToCart(c){return this._HttpClient.post(this.baseUrl,{productId:c},{headers:this.myHeaders})}getCart(){return this._HttpClient.get(this.baseUrl,{headers:this.myHeaders})}removeSpecificCartItem(c){return this._HttpClient.delete(`${this.baseUrl}/${c}`,{headers:this.myHeaders})}clearCart(){return this._HttpClient.delete(this.baseUrl,{headers:this.myHeaders})}updateItemCount(c,s){return this._HttpClient.put(`${this.baseUrl}/${c}`,{count:s},{headers:this.myHeaders})}checkOut(c,s){return this._HttpClient.post(`https://ecommerce.routemisr.com/api/v1/orders/checkout-session/${c}?url=http://localhost:4200`,{shippingAddress:s},{headers:this.myHeaders})}static{this.\u0275fac=function(s){return new(s||t)(d.KVO(m.Qq))}}static{this.\u0275prov=d.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})()},2727:(_,g,i)=>{i.r(g),i.d(g,{CartComponent:()=>O});var d=i(177),m=i(3276),r=i(9969),t=i(2598),C=i(8964);function c(a,u){if(1&a){const n=t.RV6();t.j41(0,"button",8),t.bIt("click",function(){t.eBV(n);const e=t.XpG();return t.Njj(e.clearAllCart())}),t.nrm(1,"i",9),t.EFF(2," Clear Cart "),t.k0s()}}function s(a,u){1&a&&(t.j41(0,"div",10)(1,"div",11),t.nrm(2,"i",12),t.k0s(),t.j41(3,"h3"),t.EFF(4,"Your Cart is Empty"),t.k0s(),t.j41(5,"p"),t.EFF(6,"Looks like you haven't made your choice yet."),t.k0s(),t.j41(7,"button",13),t.EFF(8,"Start Shopping"),t.k0s()()),2&a&&t.Y8G("@fadeIn",void 0)}function f(a,u){if(1&a){const n=t.RV6();t.j41(0,"div",26)(1,"div",27),t.nrm(2,"img",28),t.k0s(),t.j41(3,"div",29)(4,"div",30)(5,"h4",31),t.EFF(6),t.k0s(),t.j41(7,"span",32),t.EFF(8),t.k0s()(),t.j41(9,"div",33)(10,"span",34),t.EFF(11),t.nI1(12,"currency"),t.k0s(),t.j41(13,"div",35)(14,"button",36),t.bIt("click",function(){const l=t.eBV(n).$implicit,p=t.XpG(2);return t.Njj(p.updateCount(l.product.id,l.count-1))}),t.EFF(15,"-"),t.k0s(),t.j41(16,"span"),t.EFF(17),t.k0s(),t.j41(18,"button",37),t.bIt("click",function(){const l=t.eBV(n).$implicit,p=t.XpG(2);return t.Njj(p.updateCount(l.product.id,l.count+1))}),t.EFF(19,"+"),t.k0s()()(),t.j41(20,"div",38)(21,"button",39),t.bIt("click",function(){const l=t.eBV(n).$implicit,p=t.XpG(2);return t.Njj(p.removeItem(l.product.id))}),t.nrm(22,"i",40),t.EFF(23," Remove Item "),t.k0s()()()()}if(2&a){const n=u.$implicit;t.R7$(2),t.Y8G("src",n.product.imageCover,t.B4B)("alt",n.product.title),t.R7$(4),t.JRh(n.product.title),t.R7$(2),t.JRh(n.product.category.name),t.R7$(3),t.JRh(t.i5U(12,7,n.price,"EGP ")),t.R7$(3),t.Y8G("disabled",n.count<=1),t.R7$(3),t.JRh(n.count)}}const h=function(a){return["/payment",a]};function P(a,u){if(1&a&&(t.j41(0,"div",14)(1,"div",15),t.DNE(2,f,24,10,"div",16),t.k0s(),t.j41(3,"div",17)(4,"div",18)(5,"h3"),t.EFF(6,"Order Summary"),t.k0s(),t.nrm(7,"div",19),t.j41(8,"div",20)(9,"span"),t.EFF(10,"Subtotal"),t.k0s(),t.j41(11,"span"),t.EFF(12),t.nI1(13,"currency"),t.k0s()(),t.j41(14,"div",21)(15,"span"),t.EFF(16,"Shipping"),t.k0s(),t.j41(17,"span"),t.EFF(18,"Free"),t.k0s()(),t.nrm(19,"div",19),t.j41(20,"div",22)(21,"span"),t.EFF(22,"Total"),t.k0s(),t.j41(23,"span",23),t.EFF(24),t.nI1(25,"currency"),t.k0s()(),t.j41(26,"button",24),t.EFF(27," Proceed to Checkout "),t.nrm(28,"i",25),t.k0s()()()()),2&a){const n=t.XpG();t.R7$(1),t.Y8G("@listAnimation",n.cartData.products.length),t.R7$(1),t.Y8G("ngForOf",n.cartData.products),t.R7$(1),t.Y8G("@fadeIn",void 0),t.R7$(9),t.JRh(t.i5U(13,6,n.cartData.totalCartPrice,"EGP ")),t.R7$(12),t.JRh(t.i5U(25,9,n.cartData.totalCartPrice,"EGP ")),t.R7$(2),t.Y8G("routerLink",t.eq3(12,h,n.cartData._id))}}let O=(()=>{class a{constructor(n){this._CartService=n,this.cartData=null,this.isLoading=!0}ngOnInit(){this.getCartDetails()}getCartDetails(){this.isLoading=!0,this._CartService.getCart().subscribe({next:n=>{this.cartData=n.data,this.isLoading=!1},error:n=>{console.log(n),this.isLoading=!1}})}removeItem(n){this._CartService.removeSpecificCartItem(n).subscribe({next:o=>{this.cartData=o.data,this._CartService.cartCount.set(o.numOfCartItems),console.log("Item Removed",o)},error:o=>console.log(o)})}clearAllCart(){this.isLoading=!0,this._CartService.clearCart().subscribe({next:n=>{"success"===n.message&&(this.cartData=null,this.isLoading=!1,this._CartService.cartCount.set(n.numOfCartItems))},error:n=>{console.log(n),this.isLoading=!1}})}updateCount(n,o){o>0&&this._CartService.updateItemCount(n,o).subscribe({next:e=>this.cartData=e.data})}static{this.\u0275fac=function(o){return new(o||a)(t.rXU(C.m))}}static{this.\u0275cmp=t.VBU({type:a,selectors:[["app-cart"]],standalone:!0,features:[t.aNF],decls:11,vars:4,consts:[[1,"cart-page"],[1,"container"],[1,"cart-header"],[1,"title-group"],[1,"subtitle"],["class","clear-btn",3,"click",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","cart-layout",4,"ngIf"],[1,"clear-btn",3,"click"],[1,"fa-solid","fa-trash-can"],[1,"empty-state"],[1,"icon-box"],[1,"fa-solid","fa-cart-arrow-down"],["routerLink","/home",1,"btn-primary"],[1,"cart-layout"],[1,"products-container"],["class","cart-card",4,"ngFor","ngForOf"],[1,"summary-wrapper"],[1,"summary-card"],[1,"divider"],[1,"summary-row"],[1,"summary-row","warning-text"],[1,"total-row"],[1,"total-price"],[1,"checkout-btn",3,"routerLink"],[1,"fa-solid","fa-arrow-right"],[1,"cart-card"],[1,"card-img"],["loading","lazy",3,"src","alt"],[1,"card-details"],[1,"top-row"],[1,"product-title"],[1,"category-badge"],[1,"price-row"],[1,"price"],[1,"qty-group"],[3,"disabled","click"],[3,"click"],[1,"actions-row"],[1,"remove-item-btn",3,"click"],[1,"fa-regular","fa-trash-can"]],template:function(o,e){1&o&&(t.j41(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1"),t.EFF(5,"Shopping Cart"),t.k0s(),t.j41(6,"p",4),t.EFF(7,"Review your selected items"),t.k0s()(),t.DNE(8,c,3,0,"button",5),t.k0s(),t.DNE(9,s,9,1,"div",6),t.DNE(10,P,29,14,"div",7),t.k0s()()),2&o&&(t.R7$(2),t.Y8G("@fadeIn",void 0),t.R7$(6),t.Y8G("ngIf",null==e.cartData||null==e.cartData.products?null:e.cartData.products.length),t.R7$(1),t.Y8G("ngIf",!e.cartData||0===(null==e.cartData||null==e.cartData.products?null:e.cartData.products.length)),t.R7$(1),t.Y8G("ngIf",e.cartData&&(null==e.cartData||null==e.cartData.products?null:e.cartData.products.length)>0))},dependencies:[d.MD,d.Sq,d.bT,d.oe,m.Wk],styles:[".cart-page[_ngcontent-%COMP%]{background-color:#f8f9fa;min-height:100vh;padding:50px 0;font-family:Poppins,sans-serif}.cart-page[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:0 20px}.cart-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:40px}.cart-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#024d94;font-weight:800;font-size:2.2rem;margin:0}.cart-header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{color:#6c757d;margin-top:5px}.cart-header[_ngcontent-%COMP%]   .clear-btn[_ngcontent-%COMP%]{background:transparent;border:2px solid #ef4444;color:#ef4444;padding:10px 20px;border-radius:30px;font-weight:600;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;gap:8px}.cart-header[_ngcontent-%COMP%]   .clear-btn[_ngcontent-%COMP%]:hover{background:#ef4444;color:#fff;transform:translateY(-2px);box-shadow:0 5px 15px #ef444433}.cart-layout[_ngcontent-%COMP%]{display:grid;grid-template-columns:2fr 1fr;gap:30px}@media (max-width: 991px){.cart-layout[_ngcontent-%COMP%]{grid-template-columns:1fr}}.cart-card[_ngcontent-%COMP%]{background:#ffffff;border-radius:20px;padding:20px;margin-bottom:20px;display:flex;gap:20px;box-shadow:0 10px 30px #0000000a;border:1px solid transparent;transition:.3s}.cart-card[_ngcontent-%COMP%]:hover{border-color:#f8d171;transform:translateY(-3px)}.cart-card[_ngcontent-%COMP%]   .card-img[_ngcontent-%COMP%]{width:120px;height:120px;flex-shrink:0;border-radius:15px;overflow:hidden;background:#f1f1f1}.cart-card[_ngcontent-%COMP%]   .card-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain}.cart-card[_ngcontent-%COMP%]   .card-details[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;justify-content:space-between}.cart-card[_ngcontent-%COMP%]   .card-details[_ngcontent-%COMP%]   .top-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start}.cart-card[_ngcontent-%COMP%]   .card-details[_ngcontent-%COMP%]   .top-row[_ngcontent-%COMP%]   .product-title[_ngcontent-%COMP%]{font-size:1.1rem;color:#024d94;margin:0;max-width:80%}.cart-card[_ngcontent-%COMP%]   .card-details[_ngcontent-%COMP%]   .top-row[_ngcontent-%COMP%]   .category-badge[_ngcontent-%COMP%]{font-size:.75rem;background:rgba(2,77,148,.1);color:#024d94;padding:4px 10px;border-radius:10px}.cart-card[_ngcontent-%COMP%]   .card-details[_ngcontent-%COMP%]   .price-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:10px}.cart-card[_ngcontent-%COMP%]   .card-details[_ngcontent-%COMP%]   .price-row[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:700;color:#1a1a1a}.cart-card[_ngcontent-%COMP%]   .card-details[_ngcontent-%COMP%]   .qty-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;background:#f8f9fa;padding:5px;border-radius:10px}.cart-card[_ngcontent-%COMP%]   .card-details[_ngcontent-%COMP%]   .qty-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:30px;height:30px;border:none;background:#ffffff;border-radius:8px;color:#024d94;font-weight:700;cursor:pointer;box-shadow:0 2px 5px #0000000d}.cart-card[_ngcontent-%COMP%]   .card-details[_ngcontent-%COMP%]   .qty-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{opacity:.5}.cart-card[_ngcontent-%COMP%]   .card-details[_ngcontent-%COMP%]   .qty-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:not(:disabled){background:#F8D171;color:#024d94}.cart-card[_ngcontent-%COMP%]   .card-details[_ngcontent-%COMP%]   .qty-group[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:600;min-width:20px;text-align:center}.cart-card[_ngcontent-%COMP%]   .card-details[_ngcontent-%COMP%]   .actions-row[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:10px}.cart-card[_ngcontent-%COMP%]   .card-details[_ngcontent-%COMP%]   .actions-row[_ngcontent-%COMP%]   .remove-item-btn[_ngcontent-%COMP%]{background:none;border:none;color:#ef4444;font-size:.9rem;cursor:pointer;display:flex;align-items:center;gap:5px;opacity:.7;transition:.2s}.cart-card[_ngcontent-%COMP%]   .card-details[_ngcontent-%COMP%]   .actions-row[_ngcontent-%COMP%]   .remove-item-btn[_ngcontent-%COMP%]:hover{opacity:1;text-decoration:underline}.summary-card[_ngcontent-%COMP%]{background:#024D94;color:#fff;padding:30px;border-radius:20px;position:sticky;top:20px;box-shadow:0 15px 40px #024d944d}.summary-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;font-size:1.5rem}.summary-card[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]{height:1px;background:rgba(255,255,255,.2);margin:20px 0}.summary-card[_ngcontent-%COMP%]   .summary-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:15px;font-size:1rem;opacity:.9}.summary-card[_ngcontent-%COMP%]   .warning-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child{color:#f8d171;font-weight:700}.summary-card[_ngcontent-%COMP%]   .total-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:1.4rem;font-weight:800;margin-bottom:30px}.summary-card[_ngcontent-%COMP%]   .total-row[_ngcontent-%COMP%]   .total-price[_ngcontent-%COMP%]{color:#f8d171}.summary-card[_ngcontent-%COMP%]   .checkout-btn[_ngcontent-%COMP%]{width:100%;padding:18px;background:#F8D171;color:#024d94;border:none;border-radius:12px;font-size:1.1rem;font-weight:700;cursor:pointer;transition:.3s;display:flex;justify-content:center;align-items:center;gap:10px}.summary-card[_ngcontent-%COMP%]   .checkout-btn[_ngcontent-%COMP%]:hover{background:#ffffff;transform:translateY(-2px);box-shadow:0 10px 20px #0003}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:80px 20px;background:#ffffff;border-radius:20px}.empty-state[_ngcontent-%COMP%]   .icon-box[_ngcontent-%COMP%]{font-size:4rem;color:#ddd;margin-bottom:20px}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#024d94;font-size:1.8rem;margin-bottom:10px}.empty-state[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background:#024D94;color:#fff;padding:12px 35px;border:none;border-radius:50px;font-size:1.1rem;cursor:pointer;margin-top:20px;transition:.3s}.empty-state[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover{background:#02407b}"],data:{animation:[(0,r.hZ)("listAnimation",[(0,r.kY)("* => *",[(0,r.P)(":enter",[(0,r.iF)({opacity:0,transform:"translateX(-20px)"}),(0,r.yc)(50,[(0,r.i0)("400ms ease-out",(0,r.iF)({opacity:1,transform:"translateX(0)"}))])],{optional:!0}),(0,r.P)(":leave",[(0,r.i0)("300ms ease-in",(0,r.iF)({opacity:0,transform:"translateX(20px)",height:0}))],{optional:!0})])]),(0,r.hZ)("fadeIn",[(0,r.kY)(":enter",[(0,r.iF)({opacity:0}),(0,r.i0)("500ms ease-in",(0,r.iF)({opacity:1}))])])]}})}}return a})()}}]);