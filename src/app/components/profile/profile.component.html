<section class="profile-container" [ngClass]="{'dark-mode': isDark}">
  <div class="container py-5">
    <div class="row g-4 justify-content-center">
      
      <div class="col-lg-4">
        <div class="profile-card text-center shadow-lg">
          <div class="avatar-upload">
            <div class="avatar-preview">
              <img [src]="userImage" id="imagePreview" alt="User" loading="lazy">
            </div>
            <div class="avatar-edit">
              <input type='file' id="imageUpload" accept=".png, .jpg, .jpeg" (change)="onFileSelected($event)" />
              <label for="imageUpload"><i class="fas fa-camera"></i></label>
            </div>
          </div>
          <h4 class="mt-3 text-main">User Profile</h4>
          <div class="quick-settings mt-4">
            <button class="btn-toggle" (click)="toggleDarkMode()">
              <i [class]="isDark ? 'fas fa-sun text-warning' : 'fas fa-moon'"></i>
              {{ isDark ? 'Light Mode' : 'Dark Mode' }}
            </button>
          </div>
        </div>
      </div>

      <div class="col-lg-7">
        
        <div *ngIf="step1" @fadeSlide class="settings-content shadow">
          <div class="settings-section">
            <div class="step-badge">Step 1 of 3</div>
            <h3 class="mb-4"><i class="fas fa-envelope-open-text me-2"></i> Forgot Password?</h3>
            <p class="text-muted">Enter your email to receive a verification code.</p>
            <form [formGroup]="forgetForm" (ngSubmit)="forgetPassword()">
              <div class="form-floating mb-3">
                <input type="email" formControlName="email" class="form-control" id="emailInput" placeholder="name@example.com">
                <label for="emailInput">Email Address</label>
              </div>
              <button [disabled]="isLoading" type="submit" class="btn-save">
                <span *ngIf="!isLoading">Send Reset Code <i class="fas fa-paper-plane ms-1"></i></span>
                <i *ngIf="isLoading" class="fas fa-spinner fa-spin"></i>
              </button>
            </form>
          </div>
        </div>

        <div *ngIf="step2" @fadeSlide class="settings-content shadow">
          <div class="settings-section">
            <div class="step-badge">Step 2 of 3</div>
            <h3 class="mb-4"><i class="fas fa-key me-2"></i> Verify Code</h3>
            <p class="text-muted">Enter the 6-digit code sent to <b>{{email}}</b></p>
            <form [formGroup]="resetCodeForm" (ngSubmit)="resetCode()">
              <div class="form-floating mb-3">
                <input type="text" formControlName="resetCode" class="form-control" id="codeInput" placeholder="Code">
                <label for="codeInput">Reset Code</label>
              </div>
              <button type="submit" class="btn-save">Verify Code <i class="fas fa-shield-check ms-1"></i></button>
            </form>
          </div>
        </div>

        <div *ngIf="step3" @fadeSlide class="settings-content shadow">
          <div class="settings-section">
            <div class="step-badge">Step 3 of 3</div>
            <h3 class="mb-4"><i class="fas fa-lock me-2"></i> New Password</h3>
            <p class="text-muted">Choose a strong password for your account.</p>
            <form [formGroup]="resetPassword" (ngSubmit)="newPassword()">
              <div class="form-floating mb-3">
                <input type="password" formControlName="newPassword" class="form-control" id="passInput" placeholder="Password">
                <label for="passInput">New Password</label>
              </div>
              <button type="submit" class="btn-save">Update Password <i class="fas fa-check-circle ms-1"></i></button>
            </form>
          </div>
        </div>

      </div>
    </div>
  </div>
</section>