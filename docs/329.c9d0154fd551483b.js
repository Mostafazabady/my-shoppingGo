"use strict";(self.webpackChunkShopping_go=self.webpackChunkShopping_go||[]).push([[329],{8964:(g,l,o)=>{o.d(l,{m:()=>t});var d=o(2598),e=o(1626);let t=(()=>{class c{constructor(n){this._HttpClient=n,this.cartCount=(0,d.vPA)(0),this.myHeaders={token:localStorage.getItem("_token")},this.baseUrl="https://ecommerce.routemisr.com/api/v1/cart",localStorage.getItem("_token")&&this.getCart().subscribe({next:r=>this.cartCount.set(r.numOfCartItems),error:r=>console.log(r)})}addToCart(n){return this._HttpClient.post(this.baseUrl,{productId:n},{headers:this.myHeaders})}getCart(){return this._HttpClient.get(this.baseUrl,{headers:this.myHeaders})}removeSpecificCartItem(n){return this._HttpClient.delete(`${this.baseUrl}/${n}`,{headers:this.myHeaders})}clearCart(){return this._HttpClient.delete(this.baseUrl,{headers:this.myHeaders})}updateItemCount(n,r){return this._HttpClient.put(`${this.baseUrl}/${n}`,{count:r},{headers:this.myHeaders})}checkOut(n,r){return this._HttpClient.post(`https://ecommerce.routemisr.com/api/v1/orders/checkout-session/${n}?url=http://localhost:4200`,{shippingAddress:r},{headers:this.myHeaders})}static{this.\u0275fac=function(r){return new(r||c)(d.KVO(e.Qq))}}static{this.\u0275prov=d.jDH({token:c,factory:c.\u0275fac,providedIn:"root"})}}return c})()},2329:(g,l,o)=>{o.r(l),o.d(l,{PaymentComponent:()=>h});var d=o(177),e=o(4341),t=o(2598),c=o(8964),m=o(3276);function n(i,f){1&i&&(t.j41(0,"span"),t.EFF(1,"Proceed to Payment "),t.nrm(2,"i",20),t.k0s())}function r(i,f){1&i&&t.nrm(0,"span",21)}let h=(()=>{class i{constructor(a,p,s){this._FormBuilder=a,this._CartService=p,this._ActivatedRoute=s,this.cartId="",this.isLoading=!1,this.checkForm=this._FormBuilder.group({details:["",[e.k0.required,e.k0.minLength(3)]],phone:["",[e.k0.required,e.k0.pattern(/^01[0125][0-9]{8}$/)]],city:["",[e.k0.required]]})}ngOnInit(){this._ActivatedRoute.paramMap.subscribe({next:a=>{this.cartId=a.get("id")}})}handleForm(){this.checkForm.valid&&(this.isLoading=!0,this._CartService.checkOut(this.cartId,this.checkForm.value).subscribe({next:a=>{this.isLoading=!1,"success"===a.status&&window.open(a.response.session.url)},error:a=>{this.isLoading=!1,console.error(a)}}))}static{this.\u0275fac=function(p){return new(p||i)(t.rXU(e.ok),t.rXU(c.m),t.rXU(m.nX))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-payment"]],standalone:!0,features:[t.aNF],decls:29,vars:4,consts:[[1,"checkout-sec"],[1,"container"],[1,"checkout-card"],[1,"card-header"],[1,"fa-solid","fa-shield-check"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","details"],["type","text","id","details","formControlName","details","placeholder","e.g. 123 Street, District"],["for","phone"],["type","tel","id","phone","formControlName","phone","placeholder","01xxxxxxxxx"],["for","city"],["type","text","id","city","formControlName","city","placeholder","e.g. Cairo"],["type","submit",1,"pay-btn",3,"disabled"],[4,"ngIf"],["class","loader",4,"ngIf"],[1,"trust-badges"],[1,"fa-brands","fa-cc-visa"],[1,"fa-brands","fa-cc-mastercard"],[1,"fa-brands","fa-stripe"],[1,"fa-solid","fa-credit-card"],[1,"loader"]],template:function(p,s){1&p&&(t.j41(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3),t.nrm(4,"i",4),t.j41(5,"h2"),t.EFF(6,"Secure Checkout"),t.k0s(),t.j41(7,"p"),t.EFF(8,"Complete your shipping information to proceed to payment"),t.k0s()(),t.j41(9,"form",5),t.bIt("ngSubmit",function(){return s.handleForm()}),t.j41(10,"div",6)(11,"label",7),t.EFF(12,"Shipping Address Details"),t.k0s(),t.nrm(13,"input",8),t.k0s(),t.j41(14,"div",6)(15,"label",9),t.EFF(16,"Phone Number"),t.k0s(),t.nrm(17,"input",10),t.k0s(),t.j41(18,"div",6)(19,"label",11),t.EFF(20,"City"),t.k0s(),t.nrm(21,"input",12),t.k0s(),t.j41(22,"button",13),t.DNE(23,n,3,0,"span",14),t.DNE(24,r,1,0,"span",15),t.k0s()(),t.j41(25,"div",16),t.nrm(26,"i",17)(27,"i",18)(28,"i",19),t.k0s()()()()),2&p&&(t.R7$(9),t.Y8G("formGroup",s.checkForm),t.R7$(13),t.Y8G("disabled",s.checkForm.invalid||s.isLoading),t.R7$(1),t.Y8G("ngIf",!s.isLoading),t.R7$(1),t.Y8G("ngIf",s.isLoading))},dependencies:[d.MD,d.bT,e.X1,e.qT,e.me,e.BC,e.cb,e.j4,e.JD],styles:['.checkout-sec[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:40px 20px;background:linear-gradient(135deg,#f5f7fa 0%,#c3cfe2 100%);font-family:Poppins,sans-serif}.checkout-sec[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center}.checkout-card[_ngcontent-%COMP%]{background:#ffffff;width:100%;max-width:550px;padding:50px;border-radius:24px;box-shadow:0 20px 50px #0000001a;position:relative;overflow:hidden;border:1px solid rgba(2,77,148,.05)}.checkout-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:6px;background:linear-gradient(90deg,#024D94,#F8D171)}.checkout-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:40px}.checkout-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3.5rem;color:#024d94;margin-bottom:15px;filter:drop-shadow(0 4px 6px rgba(2,77,148,.2))}.checkout-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#024d94;font-weight:800;font-size:1.8rem;margin-bottom:10px}.checkout-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6b7280;font-size:.95rem;line-height:1.5}form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:25px;text-align:left}form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-weight:600;color:#024d94;font-size:.9rem;transition:all .3s cubic-bezier(.4,0,.2,1)}form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:14px 18px;border:2px solid #e5e7eb;border-radius:12px;font-size:1rem;transition:all .3s cubic-bezier(.4,0,.2,1);background:#f9fafb}form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#f8d171;background:#ffffff;box-shadow:0 0 0 4px #f8d17126}form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#9ca3af;font-size:.9rem}.pay-btn[_ngcontent-%COMP%]{width:100%;padding:16px;background:#024D94;color:#fff;border:none;border-radius:14px;font-size:1.1rem;font-weight:700;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);display:flex;align-items:center;justify-content:center;gap:12px;margin-top:10px;box-shadow:0 10px 20px #024d9433}.pay-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#025aad;transform:translateY(-3px);box-shadow:0 15px 30px #024d944d}.pay-btn[_ngcontent-%COMP%]:active{transform:translateY(-1px)}.pay-btn[_ngcontent-%COMP%]:disabled{background:#9ca3af;cursor:not-allowed;box-shadow:none}.pay-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.2rem;color:#f8d171}.loader[_ngcontent-%COMP%]{width:24px;height:24px;border:3px solid rgba(255,255,255,.3);border-radius:50%;border-top-color:#fff;animation:_ngcontent-%COMP%_spin .8s ease-in-out infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.trust-badges[_ngcontent-%COMP%]{margin-top:35px;padding-top:25px;border-top:1px solid #f3f4f6;display:flex;justify-content:center;gap:25px;font-size:2rem;color:#d1d5db}.trust-badges[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transition:all .3s cubic-bezier(.4,0,.2,1)}.trust-badges[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{color:#024d94;transform:scale(1.1)}@media (max-width: 640px){.checkout-card[_ngcontent-%COMP%]{padding:30px 20px}}']})}}return i})()}}]);